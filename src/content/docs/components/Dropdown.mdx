---
title: Dropdown
description: A drop down selector
---

import ShowComponent from "../../../components/doc-helpers/ShowComponent.astro";
import BasicDropdown from "../../../components/dropdown/BasicDropdown.html";
import ErrorDropdown from "../../../components/dropdown/ErrorDropdown.html";
import InactiveDropdown from "../../../components/dropdown/InactiveDropdown.html";
import SearchDropdown from "../../../components/dropdown/SearchDropdown.html";

The dropdown system provides three basic variations with different states and styling options. Each dropdown is built using the native HTML `<details>` and `<summary>` elements, enhanced with custom styling and functionality.

## Dropdown Styles

### Basic Dropdown

The basic dropdown provides standard functionality with hover and active states. It includes a label, placeholder text, and optional helper text. When the content exceeds the maximum height, a scrollbar appears allowing users to navigate through all options while maintaining a consistent component height.

<ShowComponent filePath="./src/components/dropdown/BasicDropdown.html">
  <BasicDropdown />
</ShowComponent>

### Error Dropdown

The Error Dropdown variant displays validation errors with a distinct red border and error message. It includes an error icon for better visibility.

<ShowComponent filePath="./src/components/dropdown/ErrorDropdown.html">
  <ErrorDropdown />
</ShowComponent>

### Inactive Dropdown

The Inactive Dropdown represents a disabled state where user interaction is prevented. It displays with muted colors and a disabled cursor.

<ShowComponent filePath="./src/components/dropdown/InactiveDropdown.html">
  <InactiveDropdown />
</ShowComponent>

### Search Dropdown

The Search Dropdown extends the basic dropdown functionality with a search input field, allowing users to filter through options in real-time.

<ShowComponent filePath="./src/components/dropdown/SearchDropdown.html">
  <SearchDropdown />
</ShowComponent>

## CSS Variables

The dropdown system can be customized using CSS variables:

### Layout and Sizing

| Variable                     | Default Value | Description                                                             |
| ---------------------------- | ------------- | ----------------------------------------------------------------------- |
| `--dropdown-width`           | `16rem`       | Width of the dropdown container                                         |
| `--dropdown-gap`             | `0.25rem`     | Vertical spacing between main elements (label, button, and helper text) |
| `--dropdown-padding-x`       | `1rem`        | Horizontal padding within the dropdown button and options               |
| `--dropdown-padding-y`       | `0.5rem`      | Vertical padding within the dropdown button                             |
| `--dropdown-menu-margin-top` | `0.25rem`     | Space between dropdown button and its popup menu when opened            |

### Item Configuration

| Variable                    | Default Value | Description                                             |
| --------------------------- | ------------- | ------------------------------------------------------- |
| `--dropdown-item-height`    | `2.5rem`      | Height of each dropdown option                          |
| `--dropdown-item-padding-y` | `0.5rem`      | Vertical padding of individual dropdown options         |
| `--dropdown-max-items`      | `5`           | Maximum number of visible items before scrolling begins |

### Search Configuration

| Variable                   | Default Value | Description                          |
| -------------------------- | ------------- | ------------------------------------ |
| `--dropdown-search-height` | `3rem`        | Height of the search input container |

### Borders and Styling

| Variable                          | Default Value        | Description                          |
| --------------------------------- | -------------------- | ------------------------------------ |
| `--dropdown-border-width-default` | `1px`                | Border width in default state        |
| `--dropdown-border-width-active`  | `2px`                | Border width in hover/focus states   |
| `--dropdown-border`               | `1px`                | Border width of the dropdown menu    |
| `--radius-dropdown-menu`          | `--radius-size-none` | Border radius of the dropdown menu   |
| `--radius-dropdown-summary`       | `--radius-size-sm`   | Border radius of the dropdown button |
| `--dropdown-menu-shadow`          | `[complex shadow]`   | Shadow effect for the dropdown menu  |

### Scrolling Behavior

The dropdown uses a dynamic max-height calculation based on the following formula:

```css
max-height: calc(
  (var(--dropdown-item-height) * var(--dropdown-max-items)) +
    (var(--dropdown-menu-padding-y) * 2)
);
```

This ensures consistent height across all dropdown variants. When content exceeds this height, a scrollbar appears automatically. For the search dropdown, the formula is adjusted to account for the search input:

```css
max-height: calc(
  (var(--dropdown-item-height) * var(--dropdown-max-items)) +
    (var(--dropdown-menu-padding-y) * 2) + var(--dropdown-search-height)
);
```

## Accessibility

The dropdown components are built with accessibility in mind, using semantic HTML and ARIA attributes to ensure they work well with screen readers and keyboard navigation.

### Current Implementation Features

#### Structure and Labeling

> Each dropdown is wrapped in a `region` with a clear description of its purpose
> Every dropdown has a proper label that's connected to the component
> The dropdown uses the native HTML `<details>` and `<summary>` elements for built-in keyboard support

#### Keyboard Support

The current implementation provides:

> Space/Enter keys to open/close the dropdown (built-in with `<details>`)
> Tab navigation between focusable elements
> Focus indicators on interactive elements

#### Screen Reader Support

Each variant includes specific features for screen readers:

**Basic Dropdown:**

- [x] Clear labeling with `aria-describedby` to connect the selected value to its label
- [x] Helper text that updates through an `aria-live="polite"` region
- [x] Options marked with `role="option"` and `aria-selected` states

**Error Dropdown:**

- [x] Error state indicated with `aria-invalid="true"`
- [x] Error message announced through `aria-live="assertive"` for immediate attention
- [x] Error icon hidden from screen readers with `aria-hidden="true"`
- [x] Selected value connected to both label and error message via `aria-describedby`

**Inactive Dropdown:**

- [x] Clearly marked as disabled using `aria-disabled="true"`
- [x] Interaction prevented using the `inert` attribute
- [x] Disabled state reflected in helper text
- [x] All options marked with `aria-disabled="true"`

**Search Dropdown:**

- [x] Search input labeled with `sr-only` class for screen readers
- [x] Search icon marked as decorative with `aria-hidden="true"`
- [x] Results list maintains proper ARIA roles and states

### Required JavaScript Implementation

#### Keyboard Navigation

Implement the following keyboard interactions:

- [ ] Up/Down arrows to navigate through options
- [ ] Home/End keys to jump to first/last option
- [ ] Type-ahead functionality to jump to options starting with typed characters
- [ ] Escape key to close the dropdown
- [ ] Enter/Space to select the current option

#### ARIA State Management

Update the following ARIA states dynamically:

- [ ] `aria-selected="true"` on the currently selected option
- [ ] `aria-expanded` state on the dropdown button
- [ ] Update `aria-activedescendant` to reflect the currently focused option
- [ ] Maintain proper focus management when dropdown closes

#### Search Functionality

For search dropdown variant:

- [ ] Announce number of search results to screen readers
- [ ] Update `aria-live` region when search results change
- [ ] Maintain focus within search results when navigating
- [ ] Reset search and focus when dropdown closes
